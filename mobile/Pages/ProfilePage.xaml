<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="mobile.Pages.ProfilePage"
             xmlns:viewmodels="clr-namespace:mobile.PageModels"
             x:DataType="viewmodels:ProfilePageModel"
             BackgroundColor="{AppThemeBinding Light=#F5F5F7, Dark=#000000}">

    <ScrollView>
        <VerticalStackLayout Spacing="0">
            
            <!-- Header avec gradient -->
            <Grid RowDefinitions="200,Auto" Margin="0,0,0,20">
                <!-- Gradient background -->
                <Border Grid.RowSpan="2"
                        StrokeThickness="0"
                        StrokeShape="RoundRectangle 0,0,32,32">
                    <Border.Background>
                        <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                            <GradientStop Color="{StaticResource Primary}" Offset="0.0" />
                            <GradientStop Color="{StaticResource Secondary}" Offset="1.0" />
                        </LinearGradientBrush>
                    </Border.Background>
                </Border>
                
                <!-- Avatar et info utilisateur -->
                <VerticalStackLayout Grid.Row="1" 
                                    Spacing="12"
                                    Margin="0,-60,0,0">
                    <!-- Avatar avec bordure -->
                    <Border WidthRequest="120"
                            HeightRequest="120"
                            StrokeShape="RoundRectangle 60"
                            Stroke="White"
                            StrokeThickness="4"
                            HorizontalOptions="Center"
                            BackgroundColor="{AppThemeBinding Light=White, Dark=#1C1C1E}">
                        <Border.Shadow>
                            <Shadow Brush="Black" Opacity="0.3" Radius="30" Offset="0,8" />
                        </Border.Shadow>
                        
                        <Label Text="ðŸ‘¤"
                               FontSize="60"
                               HorizontalOptions="Center"
                               VerticalOptions="Center"/>
                    </Border>
                    
                    <!-- Nom utilisateur -->
                    <Label Text="{Binding UserName}"
                           FontSize="28"
                           FontAttributes="Bold"
                           HorizontalOptions="Center"
                           TextColor="{AppThemeBinding Light={StaticResource Gray900}, Dark=White}"/>
                    
                    <!-- Email -->
                    <Label Text="{Binding UserEmail}"
                           FontSize="15"
                           HorizontalOptions="Center"
                           TextColor="{AppThemeBinding Light={StaticResource Gray600}, Dark=#8E8E93}"/>
                </VerticalStackLayout>
            </Grid>

            <!-- Menu Options -->
            <VerticalStackLayout Spacing="8" Padding="20,0">
                    
                <!-- Section Apparence -->
                <Label Text="APPARENCE"
                       FontSize="12"
                       FontAttributes="Bold"
                       Margin="4,20,0,8"
                       TextColor="{AppThemeBinding Light={StaticResource Gray600}, Dark=#8E8E93}"/>
                
                <Border StrokeShape="RoundRectangle 16"
                        BackgroundColor="{AppThemeBinding Light=White, Dark=#1C1C1E}"
                        StrokeThickness="0"
                        Padding="0">
                    <Border.Shadow>
                        <Shadow Brush="Black" Opacity="0.06" Radius="16" Offset="0,4" />
                    </Border.Shadow>
                    
                    <Grid Padding="20,16" ColumnDefinitions="Auto,*,Auto" ColumnSpacing="16">
                        <Border Grid.Column="0"
                                WidthRequest="44"
                                HeightRequest="44"
                                StrokeShape="RoundRectangle 12"
                                BackgroundColor="{AppThemeBinding Light=#F5F5F7, Dark=#2C2C2E}"
                                StrokeThickness="0">
                            <Label Text="ðŸŒ“"
                                   FontSize="22"
                                   HorizontalOptions="Center"
                                   VerticalOptions="Center"/>
                        </Border>
                        
                        <VerticalStackLayout Grid.Column="1" 
                                           Spacing="2"
                                           VerticalOptions="Center">
                            <Label Text="ThÃ¨me sombre"
                                   FontSize="16"
                                   FontAttributes="Bold"
                                   TextColor="{AppThemeBinding Light={StaticResource Gray900}, Dark=White}"/>
                            <Label Text="Activer le mode sombre"
                                   FontSize="13"
                                   TextColor="{AppThemeBinding Light={StaticResource Gray600}, Dark=#8E8E93}"/>
                        </VerticalStackLayout>
                        
                        <Switch Grid.Column="2"
                                x:Name="ThemeSwitch"
                                VerticalOptions="Center"
                                Toggled="ThemeSwitch_Toggled"/>
                    </Grid>
                </Border>

                <!-- Section Compte -->
                <Label Text="COMPTE"
                       FontSize="12"
                       FontAttributes="Bold"
                       Margin="4,20,0,8"
                       TextColor="{AppThemeBinding Light={StaticResource Gray600}, Dark=#8E8E93}"/>
                
                <Border StrokeShape="RoundRectangle 16"
                        BackgroundColor="{AppThemeBinding Light=White, Dark=#1C1C1E}"
                        StrokeThickness="0"
                        Padding="0">
                    <Border.Shadow>
                        <Shadow Brush="Black" Opacity="0.06" Radius="16" Offset="0,4" />
                    </Border.Shadow>
                    
                    <VerticalStackLayout Spacing="0">
                        <!-- ParamÃ¨tres -->
                        <Border StrokeThickness="0"
                                BackgroundColor="Transparent">
                            <Border.GestureRecognizers>
                                <TapGestureRecognizer Command="{Binding OpenSettingsCommand}" />
                            </Border.GestureRecognizers>
                            
                            <Grid Padding="20,16" ColumnDefinitions="Auto,*,Auto" ColumnSpacing="16">
                                <Border Grid.Column="0"
                                        WidthRequest="44"
                                        HeightRequest="44"
                                        StrokeShape="RoundRectangle 12"
                                        BackgroundColor="{AppThemeBinding Light=#F5F5F7, Dark=#2C2C2E}"
                                        StrokeThickness="0">
                                    <Label Text="âš™ï¸"
                                           FontSize="22"
                                           HorizontalOptions="Center"
                                           VerticalOptions="Center"/>
                                </Border>
                                
                                <Label Grid.Column="1"
                                       Text="ParamÃ¨tres"
                                       FontSize="16"
                                       FontAttributes="Bold"
                                       VerticalOptions="Center"
                                       TextColor="{AppThemeBinding Light={StaticResource Gray900}, Dark=White}"/>
                                
                                <Label Grid.Column="2"
                                       Text="â€º"
                                       FontSize="28"
                                       VerticalOptions="Center"
                                       TextColor="{AppThemeBinding Light={StaticResource Gray400}, Dark=#8E8E93}"/>
                            </Grid>
                        </Border>
                        
                        <!-- SÃ©parateur -->
                        <BoxView HeightRequest="1"
                                 Margin="20,0"
                                 Color="{AppThemeBinding Light=#E5E5EA, Dark=#2C2C2E}"/>
                        
                        <!-- DÃ©connexion -->
                        <Border StrokeThickness="0"
                                BackgroundColor="Transparent">
                            <Border.GestureRecognizers>
                                <TapGestureRecognizer Command="{Binding LogoutCommand}" />
                            </Border.GestureRecognizers>
                            
                            <Grid Padding="20,16" ColumnDefinitions="Auto,*,Auto" ColumnSpacing="16">
                                <Border Grid.Column="0"
                                        WidthRequest="44"
                                        HeightRequest="44"
                                        StrokeShape="RoundRectangle 12"
                                        BackgroundColor="#FFEBEE"
                                        StrokeThickness="0">
                                    <Label Text="ðŸšª"
                                           FontSize="22"
                                           HorizontalOptions="Center"
                                           VerticalOptions="Center"/>
                                </Border>
                                
                                <Label Grid.Column="1"
                                       Text="DÃ©connexion"
                                       FontSize="16"
                                       FontAttributes="Bold"
                                       VerticalOptions="Center"
                                       TextColor="#DC362E"/>
                                
                                <Label Grid.Column="2"
                                       Text="â€º"
                                       FontSize="28"
                                       VerticalOptions="Center"
                                       TextColor="#DC362E"/>
                            </Grid>
                        </Border>
                    </VerticalStackLayout>
                </Border>
            </VerticalStackLayout>
        </VerticalStackLayout>
    </ScrollView>
</ContentPage>
