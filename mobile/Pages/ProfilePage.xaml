<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="mobile.Pages.ProfilePage"
             xmlns:viewmodels="clr-namespace:mobile.PageModels"
             x:DataType="viewmodels:ProfilePageModel"
             BackgroundColor="{AppThemeBinding Light=#F5F5F5, Dark=#000000}">

    <ScrollView>
        <VerticalStackLayout Spacing="0">
            
            <!-- Header avec gradient Fluent -->
            <Grid RowDefinitions="180,Auto" Margin="0,0,0,20">
                <!-- Gradient background -->
                <Border Grid.RowSpan="2"
                        StrokeThickness="0"
                        StrokeShape="RoundRectangle 0,0,32,32">
                    <Border.Background>
                        <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                            <GradientStop Color="{StaticResource Primary}" Offset="0.0" />
                            <GradientStop Color="{StaticResource Secondary}" Offset="1.0" />
                        </LinearGradientBrush>
                    </Border.Background>
                </Border>
                
                <!-- Avatar et info utilisateur -->
                <VerticalStackLayout Grid.Row="1" 
                                    Spacing="10"
                                    Margin="0,-95,0,40">
                    <!-- Avatar avec initiales et effet Fluent -->
                    <Border WidthRequest="110"
                            HeightRequest="110"
                            StrokeShape="RoundRectangle 55"
                            Stroke="White"
                            StrokeThickness="2"
                            HorizontalOptions="Center">
                        <Border.Background>
                            <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                <GradientStop Color="{StaticResource Primary}" Offset="0.0" />
                                <GradientStop Color="{StaticResource Secondary}" Offset="1.0" />
                            </LinearGradientBrush>
                        </Border.Background>
                        <Border.Shadow>
                            <Shadow Brush="Black" Opacity="0.2" Radius="24" Offset="0,8" />
                        </Border.Shadow>
                        
                        <Label Text="{Binding Initials}"
                               FontSize="38"
                               FontAttributes="Bold"
                               TextColor="White"
                               HorizontalOptions="Center"
                               VerticalOptions="Center"/>
                    </Border>
                    
                    <!-- Nom utilisateur -->
                    <Label Text="{Binding UserName}"
                           FontSize="24"
                           FontAttributes="Bold"
                           HorizontalOptions="Center"
                           TextColor="{AppThemeBinding Light={StaticResource Gray900}, Dark=White}"/>
                    
                    <!-- Email -->
                    <Label Text="{Binding UserEmail}"
                           FontSize="14"
                           HorizontalOptions="Center"
                           Opacity="0.7"
                           TextColor="{AppThemeBinding Light={StaticResource Gray600}, Dark=#8E8E93}"/>
                </VerticalStackLayout>
            </Grid>

            <!-- Menu Options -->
            <VerticalStackLayout Spacing="16" Padding="20,0">
                    
                <!-- Card Apparence avec Fluent Design -->
                <Border StrokeShape="RoundRectangle 12"
                        BackgroundColor="{AppThemeBinding Light=White, Dark=#1C1C1E}"
                        StrokeThickness="0"
                        Padding="0">
                    <Border.Shadow>
                        <Shadow Brush="Black" Opacity="0.04" Radius="8" Offset="0,2" />
                    </Border.Shadow>
                    
                    <Grid Padding="20,16" ColumnDefinitions="Auto,*,Auto" ColumnSpacing="16">
                        <!-- IcÃ´ne -->
                        <Border Grid.Column="0"
                                WidthRequest="40"
                                HeightRequest="40"
                                StrokeShape="RoundRectangle 8"
                                BackgroundColor="{AppThemeBinding Light=#F3F3F3, Dark=#2C2C2E}"
                                StrokeThickness="0">
                            <Label Text="ðŸŽ¨"
                                   FontSize="20"
                                   HorizontalOptions="Center"
                                   VerticalOptions="Center"/>
                        </Border>
                        
                        <!-- Texte -->
                        <VerticalStackLayout Grid.Column="1" 
                                           Spacing="2"
                                           VerticalOptions="Center">
                            <Label Text="ThÃ¨me sombre"
                                   FontSize="16"
                                   FontAttributes="Bold"
                                   TextColor="{AppThemeBinding Light={StaticResource Gray900}, Dark=White}"/>
                            <Label Text="Activer le mode sombre"
                                   FontSize="13"
                                   Opacity="0.6"
                                   TextColor="{AppThemeBinding Light={StaticResource Gray600}, Dark=#8E8E93}"/>
                        </VerticalStackLayout>
                        
                        <!-- Switch -->
                        <Switch Grid.Column="2"
                                x:Name="ThemeSwitch"
                                VerticalOptions="Center"
                                Toggled="ThemeSwitch_Toggled"/>
                    </Grid>
                </Border>

                <!-- Card ParamÃ¨tres avec Fluent Design -->
                <Border StrokeShape="RoundRectangle 12"
                        BackgroundColor="{AppThemeBinding Light=White, Dark=#1C1C1E}"
                        StrokeThickness="0">
                    <Border.GestureRecognizers>
                        <TapGestureRecognizer Command="{Binding OpenSettingsCommand}" />
                    </Border.GestureRecognizers>
                    <Border.Shadow>
                        <Shadow Brush="Black" Opacity="0.04" Radius="8" Offset="0,2" />
                    </Border.Shadow>
                    
                    <Grid Padding="20,16" ColumnDefinitions="Auto,*,Auto" ColumnSpacing="16">
                        <!-- IcÃ´ne -->
                        <Border Grid.Column="0"
                                WidthRequest="40"
                                HeightRequest="40"
                                StrokeShape="RoundRectangle 8"
                                BackgroundColor="{AppThemeBinding Light=#F3F3F3, Dark=#2C2C2E}"
                                StrokeThickness="0">
                            <Label Text="âš™ï¸"
                                   FontSize="20"
                                   HorizontalOptions="Center"
                                   VerticalOptions="Center"/>
                        </Border>
                        
                        <!-- Texte -->
                        <VerticalStackLayout Grid.Column="1" 
                                           Spacing="2"
                                           VerticalOptions="Center">
                            <Label Text="ParamÃ¨tres"
                                   FontSize="16"
                                   FontAttributes="Bold"
                                   TextColor="{AppThemeBinding Light={StaticResource Gray900}, Dark=White}"/>
                            <Label Text="GÃ©rer vos prÃ©fÃ©rences"
                                   FontSize="13"
                                   Opacity="0.6"
                                   TextColor="{AppThemeBinding Light={StaticResource Gray600}, Dark=#8E8E93}"/>
                        </VerticalStackLayout>
                        
                        <!-- Chevron -->
                        <Label Grid.Column="2"
                               Text="â€º"
                               FontSize="24"
                               VerticalOptions="Center"
                               Opacity="0.3"
                               TextColor="{AppThemeBinding Light={StaticResource Gray600}, Dark=#8E8E93}"/>
                    </Grid>
                </Border>
                
                <!-- Card DÃ©connexion avec Fluent Design -->
                <Border StrokeShape="RoundRectangle 12"
                        BackgroundColor="{AppThemeBinding Light=White, Dark=#1C1C1E}"
                        StrokeThickness="0">
                    <Border.GestureRecognizers>
                        <TapGestureRecognizer Command="{Binding LogoutCommand}" />
                    </Border.GestureRecognizers>
                    <Border.Shadow>
                        <Shadow Brush="Black" Opacity="0.04" Radius="8" Offset="0,2" />
                    </Border.Shadow>
                    
                    <Grid Padding="20,16" ColumnDefinitions="Auto,*,Auto" ColumnSpacing="16">
                        <!-- IcÃ´ne -->
                        <Border Grid.Column="0"
                                WidthRequest="40"
                                HeightRequest="40"
                                StrokeShape="RoundRectangle 8"
                                BackgroundColor="#FFEBEE"
                                StrokeThickness="0">
                            <Label Text="ðŸšª"
                                   FontSize="20"
                                   HorizontalOptions="Center"
                                   VerticalOptions="Center"/>
                        </Border>
                        
                        <!-- Texte -->
                        <VerticalStackLayout Grid.Column="1" 
                                           Spacing="2"
                                           VerticalOptions="Center">
                            <Label Text="DÃ©connexion"
                                   FontSize="16"
                                   FontAttributes="Bold"
                                   TextColor="#E53935"/>
                            <Label Text="Se dÃ©connecter de l'application"
                                   FontSize="13"
                                   Opacity="0.6"
                                   TextColor="{AppThemeBinding Light={StaticResource Gray600}, Dark=#8E8E93}"/>
                        </VerticalStackLayout>
                        
                        <!-- Chevron -->
                        <Label Grid.Column="2"
                               Text="â€º"
                               FontSize="24"
                               VerticalOptions="Center"
                               Opacity="0.3"
                               TextColor="#E53935"/>
                    </Grid>
                </Border>
            </VerticalStackLayout>
        </VerticalStackLayout>
    </ScrollView>

</ContentPage>
