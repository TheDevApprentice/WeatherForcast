<?xml version="1.0" encoding="utf-8"?>
<Window xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
        xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
        xmlns:local="clr-namespace:mobile"
        x:Class="mobile.MainWindow">
    <!-- TitleBar personnalisée (Windows et Mac uniquement) -->
    <Window.TitleBar>
        <TitleBar Title="☁️ WeatherForecast"
                  Subtitle="Test"
                  BackgroundColor="{AppThemeBinding Light=#667eea, Dark=#1C1C1E}"
                  ForegroundColor="{AppThemeBinding Light=White, Dark=White}"
                  HeightRequest="48">
            <TitleBar.LeadingContent>
                <!-- Bouton Account -->
                <Button x:Name="AccountButton"
                        Text="HA"
                        HeightRequest="30"
                        WidthRequest="30"
                        Padding="0"
                        FontFamily="SegoeSemibold"
                        Margin="5,0,0,0"
                        Background="{AppThemeBinding Light=transparent, Dark=transparent}"
                        BorderColor="White"
                        BorderWidth="2"
                        CornerRadius="20"
                        Clicked="OnAccountTapped"
                        IsVisible="True"
                        VerticalOptions="Center"
                        HorizontalOptions="Center" />
            </TitleBar.LeadingContent>
            <TitleBar.Content>
                <SearchBar Placeholder="Rechercher une ville..."
                           PlaceholderColor="{AppThemeBinding Light=#667eea, Dark=White}"
                           TextColor="{AppThemeBinding Light=Black, Dark=White}"
                           MaximumWidthRequest="300"
                           BackgroundColor="{AppThemeBinding Light=White, Dark=Black}"
                           HorizontalOptions="Fill"
                           VerticalOptions="Center" />
            </TitleBar.Content>
            <TitleBar.TrailingContent>
                <HorizontalStackLayout Spacing="8" Padding="0,0,12,0">
                    <!-- Bouton Settings -->
                    <ImageButton x:Name="SettingsButton"
                                 HeightRequest="36"
                                 WidthRequest="36"
                                 BorderWidth="0"
                                 Clicked="OnSettingsTapped"
                                 Background="{AppThemeBinding Light=transparent, Dark=transparent}"
                                >
                        <ImageButton.Source>
                            <FontImageSource Size="18"
                                             Glyph="&#xE713;"
                                             FontFamily="SegoeMDL2" />
                        </ImageButton.Source>
                    </ImageButton>
                </HorizontalStackLayout>
            </TitleBar.TrailingContent>
        </TitleBar>
    </Window.TitleBar>
</Window>